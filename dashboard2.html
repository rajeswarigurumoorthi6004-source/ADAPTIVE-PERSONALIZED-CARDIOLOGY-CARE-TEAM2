<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Adaptive Personalized Cardiology Care</title>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: linear-gradient(135deg, #d7e3fc, #c2d4fa);
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 650px;
      background: #fff;
      margin: 50px auto;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      color: #003f88;
    }
    .subtitle {
      text-align: center;
      font-size: 14px;
      color: #555;
      margin-bottom: 20px;
    }
    .form-group {
      margin-bottom: 15px;
    }
    label {
      display: block;
      font-weight: 600;
      color: #222;
      margin-bottom: 5px;
    }
    input {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    button {
      background-color: #003f88;
      color: white;
      padding: 10px 18px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      width: 100%;
      font-size: 16px;
      margin-top: 10px;
    }
    button:hover {
      background-color: #0056b3;
    }
    .result {
      display: none;
      margin-top: 25px;
      padding: 20px;
      background: #f1f5ff;
      border-radius: 10px;
      text-align: center;
    }
    .result h2 {
      margin-bottom: 10px;
    }
    .score {
      font-size: 22px;
      font-weight: 600;
    }
    .advice {
      margin-top: 10px;
      font-weight: 500;
    }
    canvas {
      margin: 20px auto;
      display: block;
    }
    footer {
      text-align: center;
      margin-top: 40px;
      font-size: 13px;
      color: #777;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>Adaptive Personalized Cardiology Care</h1>
    <p class="subtitle">
      AI-powered health monitoring dashboard with electromechanical modelling, adaptive feedback & personalized prediction
    </p>

    <div class="form-group">
      <label>Age</label>
      <input type="number" id="age" value="45">
    </div>

    <div class="form-group">
      <label>Systolic BP (mmHg)</label>
      <input type="number" id="sys" value="120">
    </div>

    <div class="form-group">
      <label>Diastolic BP (mmHg)</label>
      <input type="number" id="dia" value="80">
    </div>

    <div class="form-group">
      <label>Cholesterol (mg/dL)</label>
      <input type="number" id="chol" value="180">
    </div>

    <div class="form-group">
      <label>Heart Rate (bpm)</label>
      <input type="number" id="hr" value="75">
    </div>

    <div class="form-group">
      <label>Blood Oxygen (SpOâ‚‚ %)</label>
      <input type="number" id="spo2" value="97">
    </div>

    <!-- feedback input for adaptive model -->
    <div class="form-group">
      <label>User Feedback (e.g., recent exercise, symptom severity 1-10)</label>
      <input type="number" id="feedback" value="5" min="1" max="10">
    </div>

    <button onclick="predict()">Predict & Simulate Heart Status</button>

    <div class="result" id="resultBox">
      <h2>Prediction & Simulation Result</h2>
      <canvas id="gauge" width="200" height="100"></canvas>
      <p id="risk" class="score"></p>
      <p id="score" class="score"></p>
      <p id="advice" class="advice"></p>

      <p style="margin-top:20px; font-size:14px; color:#555;">
         
      </p>
    </div>
  </div>

  <footer>Â© 2025 Adaptive Personalized Cardiology Care â€” ML & Electromechanical Dashboard Demo</footer>

<script>
function predict() {
  let age = parseFloat(document.getElementById("age").value);
  let sys = parseFloat(document.getElementById("sys").value);
  let dia = parseFloat(document.getElementById("dia").value);
  let chol = parseFloat(document.getElementById("chol").value);
  let hr = parseFloat(document.getElementById("hr").value);
  let spo2 = parseFloat(document.getElementById("spo2").value);
  let feedback = parseFloat(document.getElementById("feedback").value);

  // Simplified electromechanical/hemodynamic model placeholder
  let mechFactor = 1 + (feedback - 5) * 0.02;
  let risk = mechFactor * (0.03*(age-40) + 0.02*(sys-120) + 0.015*(chol-180) + 0.01*(hr-75));
  let prob = 1 / (1 + Math.exp(-0.08 * (risk - 10)));
  let healthScore = Math.max(0, Math.min(100, 100 - prob * 100));

  let advice = "";
  let color = "";
  if (healthScore >= 80) {
    advice = "âœ… Excellent! Your heart-health model is favourable. Continue current lifestyle.";
    color = "green";
  } else if (healthScore >= 60) {
    advice = "ðŸŸ¡ Fair status. Consider enhanced exercise, diet, regular monitoring.";
    color = "orange";
  } else if (healthScore >= 40) {
    advice = "ðŸŸ  Warning! Model indicates elevated risk. Consult cardiology and review therapy.";
    color = "darkorange";
  } else {
    advice = "ðŸ”´ High risk! Immediate medical attention and treatment optimisation recommended.";
    color = "red";
  }

  // âœ… Corrected lines with backticks
  document.getElementById("risk").innerHTML = `Predicted Risk Probability: ${(prob*100).toFixed(2)}%`;
  document.getElementById("score").innerHTML = `Health Score: ${healthScore.toFixed(0)} / 100`;
  document.getElementById("score").style.color = color;
  document.getElementById("advice").innerHTML = advice;
  document.getElementById("resultBox").style.display = "block";

  drawGauge(healthScore, color);
}

function drawGauge(value, color) {
  const canvas = document.getElementById("gauge");
  const ctx = canvas.getContext("2d");
  const centerX = canvas.width / 2;
  const centerY = canvas.height;
  const radius = 80;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // background arc
  ctx.beginPath();
  ctx.arc(centerX, centerY, radius, Math.PI, 0);
  ctx.strokeStyle = "#ddd";
  ctx.lineWidth = 12;
  ctx.stroke();

  // value arc
  const endAngle = Math.PI + (Math.PI * value / 100);
  ctx.beginPath();
  ctx.arc(centerX, centerY, radius, Math.PI, endAngle);
  ctx.strokeStyle = color;
  ctx.lineWidth = 12;
  ctx.stroke();

  // text
  ctx.font = "20px Poppins";
  ctx.fillStyle = "#003f88";
  ctx.textAlign = "center";
  ctx.fillText(value.toFixed(0) + "%", centerX, centerY - 10);
}
</script>
</body>
</html>